basePath: /api/v1
definitions:
  domain.CalendarEvent:
    properties:
      actual:
        type: string
      createdAt:
        type: string
      currency:
        type: string
      date:
        type: string
      detail:
        type: string
      forecast:
        type: string
      hash:
        type: string
      impact:
        type: string
      previous:
        type: string
      sourceURL:
        type: string
      updatedAt:
        type: string
    type: object
  domain.EquityPoint:
    properties:
      balance:
        type: number
      time:
        type: string
    type: object
  domain.ExposureMetrics:
    properties:
      averageExposureTime:
        type: number
      averageLeverage:
        type: number
      exposureRatio:
        type: number
      maxExposureTime:
        type: number
    type: object
  domain.PositionSide:
    enum:
    - DEAL_TYPE_BUY
    - DEAL_TYPE_SELL
    type: string
    x-enum-varnames:
    - PositionSideBuy
    - PositionSideSell
  domain.PositionStatus:
    enum:
    - open
    - closed
    type: string
    x-enum-varnames:
    - PositionStatusOpen
    - PositionStatusClosed
  domain.RiskMetrics:
    properties:
      averageDownsideRisk:
        type: number
      calmarRatio:
        type: number
      conditionalVaR95:
        type: number
      downsideDeviation:
        type: number
      kurtosis:
        type: number
      maxDrawdown:
        type: number
      maxDrawdownPercent:
        type: number
      recoveryFactor:
        type: number
      sharpeRatio:
        type: number
      skewness:
        type: number
      sortinoRatio:
        type: number
      stability:
        type: number
      ulcerIndex:
        type: number
      valueAtRisk95:
        type: number
      volatility:
        type: number
    type: object
  domain.TradeMetrics:
    properties:
      averageDurationSec:
        type: number
      averageLoss:
        type: number
      averageRMultiple:
        type: number
      averageWin:
        type: number
      bestTrade:
        type: number
      expectancy:
        type: number
      losingTrades:
        type: integer
      payoffRatio:
        type: number
      profitFactor:
        type: number
      totalTrades:
        type: integer
      winRate:
        type: number
      winningTrades:
        type: integer
      worstTrade:
        type: number
    type: object
  domain.UserPerformanceReport:
    properties:
      asOf:
        type: string
      balanceCurve:
        items:
          $ref: '#/definitions/domain.EquityPoint'
        type: array
      closedPositions:
        items:
          $ref: '#/definitions/domain.UserTrade'
        type: array
      derivedInsights:
        items:
          type: string
        type: array
      equityCurve:
        items:
          $ref: '#/definitions/domain.EquityPoint'
        type: array
      exposureMetrics:
        $ref: '#/definitions/domain.ExposureMetrics'
      openPositions:
        items:
          $ref: '#/definitions/domain.UserPositionSnapshot'
        type: array
      realizedProfit:
        type: number
      riskMetrics:
        $ref: '#/definitions/domain.RiskMetrics'
      totalReturnPercent:
        type: number
      tradeMetrics:
        $ref: '#/definitions/domain.TradeMetrics'
      unrealizedProfit:
        type: number
      userID:
        type: string
    type: object
  domain.UserPositionSnapshot:
    properties:
      accountLogin:
        type: string
      accountName:
        type: string
      balance:
        type: number
      brokerName:
        type: string
      brokerServer:
        type: string
      comment:
        type: string
      createdAt:
        type: string
      entryPrice:
        type: number
      entryTime:
        type: string
      lastUpdate:
        type: string
      magic:
        type: integer
      platform:
        type: string
      profit:
        type: number
      rawPayload:
        items:
          type: integer
        type: array
      reason:
        type: string
      riskPercent:
        type: number
      side:
        $ref: '#/definitions/domain.PositionSide'
      status:
        $ref: '#/definitions/domain.PositionStatus'
      stopLoss:
        type: number
      symbol:
        type: string
      takeProfit:
        type: number
      tickSize:
        type: number
      tickValue:
        type: number
      ticket:
        type: integer
      unrealizedPL:
        type: number
      updatedAt:
        type: string
      userID:
        type: string
      volume:
        type: number
    type: object
  domain.UserTrade:
    properties:
      comment:
        type: string
      createdAt:
        type: string
      entryPrice:
        type: number
      entryTime:
        type: string
      entryType:
        type: string
      magic:
        type: integer
      platform:
        type: string
      positionTicket:
        type: integer
      profit:
        type: number
      rawPayload:
        items:
          type: integer
        type: array
      reason:
        type: string
      riskPercent:
        type: number
      side:
        type: string
      stopLoss:
        type: number
      symbol:
        type: string
      takeProfit:
        type: number
      tickSize:
        type: number
      tickValue:
        type: number
      ticket:
        type: integer
      updatedAt:
        type: string
      userID:
        type: string
      volume:
        type: number
    type: object
  http.PositionRequest:
    properties:
      balance:
        type: number
      broker:
        type: string
      login:
        type: string
      name:
        type: string
      platform:
        type: string
      position:
        $ref: '#/definitions/http.positionPayload'
      server:
        type: string
      time:
        type: string
    type: object
  http.TradeRequest:
    properties:
      comment:
        type: string
      entry:
        type: number
      entryTime:
        type: string
      entryType:
        type: string
      magic:
        type: integer
      pid:
        type: integer
      profit:
        type: number
      reason:
        type: string
      riskPercent:
        type: number
      side:
        type: string
      sl:
        type: number
      symbol:
        type: string
      tickSize:
        type: number
      tickValue:
        type: number
      ticket:
        type: integer
      tp:
        type: number
      volume:
        type: number
    type: object
  http.TradingDataPosition:
    properties:
      comment:
        type: string
      entry:
        type: number
      entryTime:
        type: string
      magic:
        type: integer
      profit:
        type: number
      reason:
        type: string
      riskPercent:
        type: number
      side:
        type: string
      sl:
        type: number
      symbol:
        type: string
      tickSize:
        type: number
      tickValue:
        type: number
      ticket:
        type: integer
      tp:
        type: number
      volume:
        type: number
    type: object
  http.TradingDataRequest:
    properties:
      balance:
        type: number
      broker:
        type: string
      deals:
        items:
          $ref: '#/definitions/http.TradeRequest'
        type: array
      login:
        type: string
      name:
        type: string
      platform:
        type: string
      position:
        $ref: '#/definitions/http.TradingDataPosition'
      server:
        type: string
      time:
        type: string
      timeGMT:
        type: string
      type:
        type: string
    type: object
  http.positionPayload:
    properties:
      comment:
        type: string
      entry:
        type: number
      entryTime:
        type: string
      magic:
        type: integer
      profit:
        type: number
      reason:
        type: string
      riskPercent:
        type: number
      side:
        type: string
      sl:
        type: number
      symbol:
        type: string
      tickSize:
        type: number
      tickValue:
        type: number
      ticket:
        type: integer
      tp:
        type: number
      volume:
        type: number
    type: object
info:
  contact: {}
  description: API for ForexFactory calendar data, live positions, trade history,
    and analytics.
  title: Forex Trading Server API
  version: "1.0"
paths:
  /events:
    get:
      parameters:
      - description: Maximum number of events
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.CalendarEvent'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List calendar events
      tags:
      - calendar
  /events/sync:
    post:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: integer
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Trigger a calendar sync
      tags:
      - calendar
  /trading-data:
    post:
      consumes:
      - application/json
      parameters:
      - description: Trading data payload
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/http.TradingDataRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Handle trading data (positions or history)
      tags:
      - trading
  /users/{user_id}/positions:
    post:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: user_id
        required: true
        type: string
      - description: Position payload
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/http.PositionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Upsert a live position snapshot
      tags:
      - trading
  /users/{user_id}/report:
    get:
      parameters:
      - description: User ID
        in: path
        name: user_id
        required: true
        type: string
      - description: Maximum history window
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.UserPerformanceReport'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Generate a performance report for a user
      tags:
      - trading
  /users/{user_id}/trades:
    post:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: user_id
        required: true
        type: string
      - description: Trade payload
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/http.TradeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Record a trade history entry
      tags:
      - trading
swagger: "2.0"
